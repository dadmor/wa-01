import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
// src/pages/teacher/ui.LessonDetail.tsx
import { TeacherPageLayout } from '@/components/layout/TeacherPageLayout';
import { useFetch } from '@/pages/api/hooks';
import { useParams, Link } from 'react-router-dom';
export const routeConfig = { path: "/teacher/lessons/:id", title: "Lesson Detail" };
export default function LessonDetail() {
    const { id } = useParams();
    const { data: lesson } = useFetch('lesson-detail', `lessons?id=eq.${id}`);
    const { data: articles } = useFetch('lesson-articles', `articles?lesson_id=eq.${id}&order=sort_order`);
    const { data: tasks } = useFetch('lesson-tasks', `tasks?lesson_id=eq.${id}`);
    const lessonData = lesson?.[0];
    if (!lessonData) {
        return (_jsx("div", { className: "min-h-screen bg-base-200 flex items-center justify-center", children: _jsx("div", { className: "loading loading-spinner loading-lg" }) }));
    }
    return (_jsxs(TeacherPageLayout, { showPadding: true, title: "Uczniowie", subtitle: "Lista uczni\u00F3w", children: [_jsx("div", { className: "card bg-base-100 shadow-sm", children: _jsxs("div", { className: "card-body", children: [_jsx("h1", { className: "text-2xl font-bold mb-2", children: lessonData.title }), _jsx("p", { className: "text-base-content/70 mb-4", children: lessonData.description }), _jsxs("div", { className: "flex gap-2", children: [_jsx("span", { className: "badge badge-primary", children: lessonData.subject }), _jsx("span", { className: "badge badge-secondary", children: lessonData.grade }), lessonData.topic && _jsx("span", { className: "badge badge-outline", children: lessonData.topic })] })] }) }), _jsxs("div", { className: "grid md:grid-cols-2 gap-6", children: [_jsx("div", { className: "card bg-base-100 shadow-sm", children: _jsxs("div", { className: "card-body", children: [_jsxs("div", { className: "flex justify-between items-center mb-4", children: [_jsxs("h2", { className: "card-title text-lg", children: [_jsx("span", { className: "text-primary", children: "\uD83D\uDCC4" }), "Tre\u015Bci (", articles?.length || 0, ")"] }), _jsx(Link, { to: `/teacher/lessons/${id}/articles/create`, className: "btn btn-sm btn-primary", children: "\u2795 Dodaj tre\u015B\u0107" })] }), _jsx("div", { className: "space-y-3", children: articles && articles.length > 0 ? (articles.map(article => (_jsx("div", { className: "card bg-base-200 shadow-sm", children: _jsxs("div", { className: "card-body py-3", children: [_jsx("div", { className: "font-medium text-sm", children: article.title }), _jsxs("div", { className: "flex gap-2 mt-2", children: [_jsx(Link, { to: `/teacher/lessons/${id}/articles/${article.id}/edit`, className: "btn btn-xs btn-outline", children: "\u270F\uFE0F Edytuj" }), _jsx(Link, { to: `/teacher/lessons/${id}/articles/${article.id}`, className: "btn btn-xs btn-ghost", children: "\uD83D\uDC41\uFE0F Zobacz" })] })] }) }, article.id)))) : (_jsxs("div", { className: "text-center py-8 text-base-content/50", children: [_jsx("div", { className: "text-3xl opacity-30 mb-2", children: "\uD83D\uDCC4" }), _jsx("p", { className: "text-sm mb-3", children: "Brak tre\u015Bci" }), _jsx(Link, { to: `/teacher/lessons/${id}/articles/create`, className: "btn btn-sm btn-primary", children: "Dodaj pierwsz\u0105 tre\u015B\u0107" })] })) })] }) }), _jsx("div", { className: "card bg-base-100 shadow-sm", children: _jsxs("div", { className: "card-body", children: [_jsxs("div", { className: "flex justify-between items-center mb-4", children: [_jsxs("h2", { className: "card-title text-lg", children: [_jsx("span", { className: "text-primary", children: "\u2753" }), "Quizy (", tasks?.length || 0, ")"] }), _jsx(Link, { to: `/teacher/lessons/${id}/tasks/create`, className: "btn btn-sm btn-primary", children: "\u2795 Dodaj quiz" })] }), _jsx("div", { className: "space-y-3", children: tasks && tasks.length > 0 ? (tasks.map(task => (_jsx("div", { className: "card bg-base-200 shadow-sm", children: _jsxs("div", { className: "card-body py-3", children: [_jsx("div", { className: "font-medium text-sm line-clamp-2", children: task.question_text }), _jsxs("div", { className: "flex gap-2 mt-2", children: [_jsx("span", { className: "badge badge-xs badge-outline", children: task.type }), _jsxs("span", { className: "badge badge-xs badge-accent", children: [task.xp_reward, " XP"] })] }), _jsx("div", { className: "flex gap-2 mt-2", children: _jsx(Link, { to: `/teacher/lessons/${id}/tasks/${task.id}/edit`, className: "btn btn-xs btn-outline", children: "\u270F\uFE0F Edytuj" }) })] }) }, task.id)))) : (_jsxs("div", { className: "text-center py-8 text-base-content/50", children: [_jsx("div", { className: "text-3xl opacity-30 mb-2", children: "\u2753" }), _jsx("p", { className: "text-sm mb-3", children: "Brak quiz\u00F3w" }), _jsx(Link, { to: `/teacher/lessons/${id}/tasks/create`, className: "btn btn-sm btn-primary", children: "Dodaj pierwszy quiz" })] })) })] }) })] }), _jsx("div", { className: "card bg-base-100 shadow-sm", children: _jsxs("div", { className: "card-body", children: [_jsxs("h2", { className: "card-title text-lg mb-4", children: [_jsx("span", { className: "text-primary", children: "\u26A1" }), "Szybkie akcje"] }), _jsxs("div", { className: "flex flex-wrap gap-3", children: [_jsx(Link, { to: `/teacher/lessons/${id}/edit`, className: "btn btn-outline", children: "\u270F\uFE0F Edytuj lekcj\u0119" }), _jsx(Link, { to: "/teacher/lessons", className: "btn btn-ghost", children: "\u2190 Powr\u00F3t do listy" }), _jsx(Link, { to: `/student/lessons/${id}`, className: "btn btn-info", children: "\uD83D\uDC41\uFE0F Podgl\u0105d ucznia" })] })] }) })] }));
}
